<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>フロントWEBアプリ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script type="text/javascript" src="/crud.js"></script>

<script>
    // URLのクエリパラメータを取得する 例：xxx.html?id=4&data='a'
    function getQueryParams() {
        const params = {};
        const queryString = window.location.search; // ?から後ろのパラメータを取得する
        const urlParams = new URLSearchParams( queryString ); // パラメータを分析できる
        document.getElementById('inputMyID').value = urlParams.get('id'); // パラメータ'id'の値を取得する
        document.getElementById('inputPlan').value = urlParams.get('plan');
        document.getElementById('inputResult').value = urlParams.get('result');

        let strHTML = "";
        strHTML = "<p>完了：<input type='checkbox' ";
        if(urlParams.get('flag')=='true') {
          strHTML += "checked ";
        }
        strHTML += "id='inputFlag' style='transform: scale(2.0); margin-left: 15px;'></p>";
        document.getElementById('outputFlag').innerHTML = strHTML;
    }
  </script>
</head>

<body style="background-color:lightblue;" class="p-3">
  <h1>変更</h1>
  <div id="token"></div>

  <div id="output"></div>
  <button onclick="window.location.href='index.html';" class="btn btn-secondary" style="float:right;"><i class="bi bi-reply"></i> 戻る</button>

  <p>ID:<input type="text" id="inputMyID" readonly style="background-color: transparent; border: none;"></p>

  <!-- 完了フラグをチェックボックスで置き換える -->
  <div id="outputFlag"></div>

  <div class="mb-3 mt-3">
    <label for="inputPlan" class="form-label">やること：</label>
    <textarea class="form-control" id="inputPlan" rows="3"></textarea>
  </div>

  <div class="mb-3 mt-3">
    <label for="inputResult" class="form-label">実績：</label>
    <textarea class="form-control" id="inputResult" rows="3"></textarea>
  </div>

  <button onclick="updateName();window.location.href='index.html';" class="btn btn-primary">データを更新</button> <!-- 追加した -->
  <button onclick="deleteName();window.location.href='index.html';" class="btn btn-danger">データを削除</button> <!-- 追加した -->
  <div id="server"></div>

  <script>
    getQueryParams();
  </script>

</body>

</html>
